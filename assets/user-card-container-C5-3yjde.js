import{r as n,t as g,u as f,q as C,G as _,j as R,U as I}from"./index-D69FPv1E.js";function N(){return{copy:n.useCallback(async(t,i)=>{try{await navigator.clipboard.writeText(t),g("Copied!",{description:i})}catch(u){console.error("Failed to copy: ",u),g("Failed to copy")}},[])}}const U=()=>{const[e,t]=n.useState(!0),[i,u]=n.useState([]),[l,p]=n.useState(""),m=n.useCallback(o=>o.sort((s,r)=>{const y=Number((s==null?void 0:s.stargazers_count)||0)+Number((s==null?void 0:s.forks_count)||0)+Number((s==null?void 0:s.watchers_count)||0);return Number((r==null?void 0:r.stargazers_count)||0)+Number((r==null?void 0:r.forks_count)||0)+Number((r==null?void 0:r.watchers_count)||0)-y}).slice(0,5),[]);return{...f({mutationFn:async o=>(await fetch(`${_}/users/${o}/repos?per_page=100`)).json(),onError:o=>{console.log(o.message),p("Failed to get user repositor"),e&&t(!1)},onSuccess:(o,c)=>{u(m(o)),C.invalidateQueries({queryKey:[`${c}-repositories`]}),e&&t(!1)}}),repositories:i,error:l,isInitial:e}},T=({data:e})=>{const{mutate:t,error:i,repositories:u,isInitial:l,isPending:p}=U(),{copy:m}=N(),a=n.useMemo(()=>{var s;return(s=e==null?void 0:e.login)==null?void 0:s.split("")[0]},[e]),o=s=>{!s||!(e!=null&&e.login)||t(e.login)},c=s=>{m(s,"Repository URL copied")};return R.jsx(I,{avatar:e==null?void 0:e.avatar_url,username:e==null?void 0:e.login,error:i,isLoading:p,initialName:a,repositories:u,isInitial:l,onGetRepositories:o,onClone:c})};export{T as UserCardContainer,T as default};
